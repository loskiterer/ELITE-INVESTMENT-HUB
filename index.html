<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELITE HUB | Global AI Trading</title>
    <script src="https://s3.tradingview.com/tv.js"></script>
    <style>
        :root {
            --primary: #22c55e; --bg-dark: #0b0f1a; --card-bg: rgba(255, 255, 255, 0.05);
            --text-gray: #94a3b8; --danger: #ef4444; --gold: #ffb700; --demo: #3b82f6;
        }

        body { font-family: 'Inter', sans-serif; margin: 0; background: var(--bg-dark); color: white; scroll-behavior: smooth; }
        .card { background: var(--card-bg); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); padding: 25px; margin-bottom: 20px; border-radius: 15px; }
        header { background: rgba(11, 15, 26, 0.95); padding: 15px; text-align: center; border-bottom: 1px solid var(--primary); position: sticky; top: 0; z-index: 1000; }
        .container { padding: 20px; max-width: 1300px; margin: auto; }
        
        button { padding: 14px; border: none; border-radius: 8px; background: var(--primary); color: white; font-weight: bold; width: 100%; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-demo { background: var(--demo); }
        .btn-alt { background: transparent; border: 1px solid var(--primary); color: white; }

        input, select { width: 100%; padding: 14px; margin: 10px 0; border-radius: 8px; border: 1px solid #334155; background: #1e293b; color: white; box-sizing: border-box; }
        
        .grid-dashboard { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        @media (max-width: 900px) { .grid-dashboard { grid-template-columns: 1fr; } }
        .hidden { display: none; }
        
        .live-dot { height: 10px; width: 10px; background: var(--primary); border-radius: 50%; display: inline-block; margin-right: 8px; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        
        #market-log { font-family: monospace; font-size: 11px; height: 100px; overflow-y: hidden; color: #4ade80; background: #000; padding: 10px; border-radius: 8px; }
    </style>
</head>
<body>

<header>
    <h2 onclick="showPage('home')" style="cursor:pointer;">ELITE <span style="color: var(--primary);">INVESTMENT</span> HUB</h2>
</header>

<div class="container">

    <div id="home">
        <div class="card" style="text-align: center; padding: 40px 20px;">
            <h1>Global Multi-Currency Trading</h1>
            <p style="color: var(--text-gray);">Supporting 50+ African nations and International Markets.</p>
            <div style="max-width: 500px; margin: auto; display: flex; gap: 10px;">
                <button onclick="showPage('register')">Get Started</button>
                <button onclick="showPage('login')" class="btn-alt">Login</button>
            </div>
        </div>
        <div class="card" id="tv_home" style="height: 350px; padding: 0;"></div>
    </div>

    <div id="register" class="hidden">
        <div class="card" style="max-width: 450px; margin: auto;">
            <h2>Register Account</h2>
            <input id="regName" placeholder="Full Name">
            <input id="regPhone" placeholder="Phone Number">
            <select id="regCountry" onchange="updateCurView()">
                <optgroup label="Africa">
                    <option value="Kenya" data-cur="KES" data-rate="1">Kenya (KES)</option>
                    <option value="Nigeria" data-cur="NGN" data-rate="12.5">Nigeria (NGN)</option>
                    <option value="South Africa" data-cur="ZAR" data-rate="0.14">South Africa (ZAR)</option>
                    <option value="Ghana" data-cur="GHS" data-rate="0.11">Ghana (GHS)</option>
                    <option value="Uganda" data-cur="UGX" data-rate="28.5">Uganda (UGX)</option>
                    <option value="Tanzania" data-cur="TZS" data-rate="19.2">Tanzania (TZS)</option>
                    <option value="Rwanda" data-cur="RWF" data-rate="9.8">Rwanda (RWF)</option>
                    <option value="Egypt" data-cur="EGP" data-rate="0.37">Egypt (EGP)</option>
                </optgroup>
                <optgroup label="International">
                    <option value="USA" data-cur="USD" data-rate="0.0076">United States (USD)</option>
                    <option value="UK" data-cur="GBP" data-rate="0.0060">United Kingdom (GBP)</option>
                    <option value="Europe" data-cur="EUR" data-rate="0.0070">Europe (EUR)</option>
                    <option value="UAE" data-cur="AED" data-rate="0.028">UAE (AED)</option>
                </optgroup>
            </select>
            <input id="regPass" type="password" placeholder="Password">
            <button onclick="handleRegister()">Proceed</button>
        </div>
    </div>

    <div id="dashboard" class="hidden">
        <div class="card" id="dashHeader" style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <div class="live-dot"></div> <small>AI TRADING ACTIVE</small>
                <h3 id="dName">User</h3>
                <div id="badge-area"></div>
            </div>
            <div style="display: flex; gap: 10px;">
                <button id="demoBtn" onclick="toggleDemo()" class="btn-demo" style="width:auto; padding: 10px;">Demo Mode</button>
                <button onclick="showPage('profilePage')" class="btn-alt" style="width:auto; padding: 10px;">Profile</button>
            </div>
        </div>

        <div class="grid-dashboard">
            <div>
                <div class="card" style="height: 350px; padding: 0; overflow: hidden;"><div id="tv_dash" style="height: 100%;"></div></div>
                <div class="card">
                    <h4>Market Logs</h4>
                    <div id="market-log"></div>
                </div>
            </div>
            <div>
                <div class="card" style="border: 1px solid var(--primary);">
                    <small>Total Net Equity</small>
                    <h1 id="dTotal" style="color: var(--primary); margin: 5px 0;">0.00</h1>
                    <p>Investment: <span id="dInv">0.00</span></p>
                    <p>Profit: <span id="dProf" style="color:var(--gold);">0.00</span></p>
                </div>
                <button onclick="showPage('withdrawPage')" style="background:var(--danger); width: 100%;">Withdraw Funds</button>
                <button onclick="logout()" class="btn-alt" style="margin-top: 15px; width: 100%;">Logout</button>
            </div>
        </div>
    </div>

    <div id="plans" class="hidden"><div class="container"><h2>Plans</h2><div class="grid-dashboard" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));"><div class="card"><h3>BASIC</h3><h2 id="p1V"></h2><button onclick="setPlan('Basic', 2000, 0.05)">Select</button></div><div class="card"><h3>GOLD</h3><h2 id="p3V"></h2><button onclick="setPlan('Gold', 10000, 0.15)">Select</button></div></div></div></div>
    <div id="login" class="hidden"><div class="card" style="max-width: 450px; margin: auto;"><h2>Login</h2><input id="lPhone" placeholder="Phone"><input id="lPass" type="password"><button onclick="handleLogin()">Login</button></div></div>
    <div id="profilePage" class="hidden"><div class="card" style="max-width: 500px; margin: auto;"><h2>Settings</h2><input id="editName"><input id="editPhone"><input id="editPass" type="password"><button onclick="saveProfile()">Update</button><button onclick="showPage('dashboard')" class="btn-alt">Back</button></div></div>
    <div id="withdrawPage" class="hidden"><div class="card" style="max-width: 450px; margin: auto;"><h2>Withdraw</h2><input id="wAmt" placeholder="Amount"><button onclick="requestWithdraw()">Request</button></div></div>

</div>

<script>
    let users = JSON.parse(localStorage.getItem("Elite_Global_V15")) || [];
    let cur = null;
    let isDemo = false;
    let demoAcc = { balance: 50000, profit: 0 };

    function save() { localStorage.setItem("Elite_Global_V15", JSON.stringify(users)); }

    // ENGINES
    setInterval(() => {
        users.forEach(u => { if(u.status === 'Active') u.profit += (u.base * u.growth); });
        save(); if(cur && !isDemo) refreshUI();
    }, 60000);

    setInterval(() => {
        if(cur && isDemo) { demoAcc.profit += (demoAcc.balance * 0.02); refreshUI(); }
    }, 8000);

    function refreshUI() {
        let u = users.find(x => x.phone === cur.phone);
        let src = isDemo ? demoAcc : u;
        let baseVal = isDemo ? demoAcc.balance : u.balance;
        
        let total = (baseVal + src.profit) * u.rate;
        dTotal.innerText = `${u.currency} ${total.toLocaleString(undefined, {minimumFractionDigits: 2})}`;
        dInv.innerText = `${u.currency} ${(baseVal * u.rate).toLocaleString()}`;
        dProf.innerText = `${u.currency} ${(src.profit * u.rate).toLocaleString()}`;
    }

    function toggleDemo() {
        isDemo = !isDemo;
        demoAcc.profit = 0;
        badge_area.innerHTML = isDemo ? '<span style="color:var(--demo)">[DEMO MODE]</span>' : '';
        demoBtn.innerText = isDemo ? "Exit Demo" : "Demo Mode";
        refreshUI();
    }

    function showPage(id) {
        document.querySelectorAll('.container > div').forEach(d => d.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        if(id === 'dashboard') initWaves('tv_dash');
        if(id === 'home') initWaves('tv_home');
    }

    function handleRegister() {
        const s = regCountry.options[regCountry.selectedIndex];
        cur = { name: regName.value, phone: regPhone.value, pass: regPass.value, currency: s.dataset.cur, rate: parseFloat(s.dataset.rate), profit: 0, balance: 0, status: "Waiting" };
        showPage('plans');
    }

    function setPlan(p, b, g) {
        cur.plan = p; cur.base = b; cur.growth = g; cur.status = "Active"; // Auto-active for this demo build
        users.push(cur); cur.balance = b; save();
        showPage('login');
    }

    function handleLogin() {
        let u = users.find(x => x.phone == lPhone.value && x.pass == lPass.value);
        if(u) { cur = u; showPage('dashboard'); dName.innerText = u.name; refreshUI(); }
    }

    function saveProfile() {
        let idx = users.findIndex(x => x.phone === cur.phone);
        users[idx].name = editName.value; users[idx].phone = editPhone.value; users[idx].pass = editPass.value;
        cur = users[idx]; save(); alert("Updated!"); showPage('dashboard');
    }

    function requestWithdraw() {
        let amt = parseFloat(wAmt.value);
        if(amt > cur.profit * cur.rate) return alert("Low balance");
        cur.profit -= (amt / cur.rate); save(); refreshUI(); alert("Success");
    }

    function initWaves(id) { new TradingView.widget({"autosize": true, "symbol": "FX:EURUSD", "interval": "1", "theme": "dark", "style": "3", "container_id": id, "hide_top_toolbar": true}); }
    
    function updateCurView() {
        const s = regCountry.options[regCountry.selectedIndex];
        const r = s.dataset.rate; const c = s.dataset.cur;
        p1V.innerText = `${c} ${(2000*r).toLocaleString()}`;
        p3V.innerText = `${c} ${(10000*r).toLocaleString()}`;
    }

    function logout() { cur=null; isDemo=false; showPage('home'); }
    window.onload = () => { initWaves('tv_home'); updateCurView(); };
</script>

</body>
</html>

